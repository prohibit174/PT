<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/td/mybatis-3-mapper.dtd">

<mapper namespace="kosta.travel.mappers.declareMapper">

	<insert id="declare_insert">
		INSERT INTO declare(
			d_num, u_id, d_reported, d_big, d_small, d_content, d_file
		) VALUES (
			#{d_num}, #{u_id}, 'x', #{d_big}, #{d_small}, #{d_content}, #{d_file}
		)
	</insert>

	<select id="d_maxNum" resultType="integer">
		SELECT max(d_num) FROM declare
	</select>
	
	<select id="declare_list" resultType="kosta.travel.domain.DeclareVO">
		SELECT * FROM declare 
		ORDER by d_num desc
	</select>
	
	<select id="myDeclaration" resultType="kosta.travel.domain.DeclareVO">
		SELECT d_num, d.u_id as u_id,d_reported, d_big, d_small, d_content, d_file,
		u.u_id as d_reported_id, u.u_name as d_reported_name, u. u_img as d_reported_img	
		FROM DECLARE d, USERS u
		WHERE d.d_reported=u.u_id
		AND d.u_id=#{u_id}
		ORDER by d_num desc
	</select>
	</mapper>