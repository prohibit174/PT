<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/td/mybatis-3-mapper.dtd">

<mapper namespace="kosta.travel.mappers.productMapper">
   

   <insert id="insertProduct" parameterType="ProductVO">
      insert into product(
      p_num, p_name, u_id, p_detail, p_price, p_date, p_img, p_ox
      )
      values(
         #{p_num}, #{p_name}, #{u_id},#{p_detail},#{p_price},sysdate,#{p_img}, 'x'
      )
   </insert>
   
   <select id="listProduct" resultType="ProductVO" >
      select * from product
      order by p_date desc
   </select>
    
    
   <select id="detailProduct" resultType="ProductVO" parameterType="String">
      select * from product where p_num = #{p_num}
   </select>
   
    
   <update id="updateProduct" parameterType="ProductVO">
      update product set p_name = #{p_name} where p_num = #{p_num}
   </update>
   
    <delete id="deleteProduct" parameterType="String">
      delete from product where p_num = #{p_num}
   </delete>
   
   
   <!-- 혜진 거래요청 insert, detail-->
   
   <insert id="insertProductReq" parameterType="Product_RequestVO">
      insert into product_req(
         pr_reqnum, u_id, p_num, pr_ox, pr_place, pr_date
         )
      values(
         #{pr_reqnum}, #{u_id}, #{p_num},
         'x',#{pr_place},#{pr_date}
      )
      
   </insert>
   
   <select id="detailProductReq" resultType="Product_RequestVO" parameterType="String">
      select * from product_req where pr_reqnum=#{pr_reqnum}
   </select>
   
   <!--<select id="listProductRequest" resultType="Product_Request" parameterType="String">
      select * from product_req where p_num IN (select p_num from product where u_id = #{u_id})
   </select>
   

   <select id="countProduct" resultType="int" parameterType="Product_Search">
      select count(*) from product   
      Product list paging work
      <if test="product_search !=null">
            <where>
               b_title, LIKE %자바% OR  b_writer LIKE %자바%
               <foreach collection="product_search" item="item" separator="OR" open="(" close=")" >
                  ${item} LIKE #{searchKey}
               </foreach>
            </where>
         </if>
   </select>
   
   <update id="updateAccept" parameterType="Product_Request">
        UPDATE product_req SET pr_ox='o'
        WHERE pr_reqnum = #{pr_reqnum}
   </update>
   
   <select id="listNotAceept" resultType="Product_Request">
      select * from product_req
      where pr_ox ='x'
   
   </select> --> 
   

</mapper>